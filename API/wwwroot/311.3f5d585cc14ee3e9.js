"use strict";(self.webpackChunkClient=self.webpackChunkClient||[]).push([[311],{5311:(q,g,i)=>{i.r(g),i.d(g,{AdminModule:()=>O});var d=i(2382),Z=i(4466),m=i(9808),e=i(4893),u=i(167),h=i(9079),f=i(5905),b=i(2290);function v(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e.TgZ(1,"input",13),e.NdJ("change",function(){const l=e.CHM(t).$implicit;return l.checked=!l.checked}),e.qZA(),e.TgZ(2,"label"),e._uU(3),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit;e.xp6(1),e.Q6J("checked",null==t?null:t.checked)("value",null==t?null:t.name),e.xp6(2),e.Oqu(null==t?null:t.name)}}function A(n,s){if(1&n&&(e.TgZ(0,"div",8),e.TgZ(1,"form",9,10),e.YNc(3,v,4,3,"div",11),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.roles)}}let M=(()=>{class n{constructor(t,o){this.bsModalRef=t,this.toast=o,this.updateRoles=new e.vpe,this.title="my Title",this.closeBtnName="close"}ngOnInit(){}changeUpdatedRoles(){this.updateRoles.emit(this.roles),this.bsModalRef.hide(),this.toast.success("roles updated")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.UZ),e.Y36(b._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-roles-modal"]],outputs:{updateRoles:"updateRoles"},decls:12,vars:3,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn-close","close","pull-right","text-danger",3,"click"],["aria-hidden","true",1,"visually-hidden"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"modal-body"],["id","rolesForm"],["rolesForm","ngForm"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"checked","value","change"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h4",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.bsModalRef.hide()}),e.TgZ(4,"span",3),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.YNc(6,A,4,1,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"button",6),e.NdJ("click",function(){return o.bsModalRef.hide()}),e._uU(9),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return o.changeUpdatedRoles()}),e._uU(11," update Roles "),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.hij("Edit Roles for ",null==o.user?null:o.user.userName,""),e.xp6(4),e.Q6J("ngIf",(null==o.roles?null:o.roles.length)>0),e.xp6(3),e.hij(" ",o.closeBtnName," "))},directives:[m.O5,d._Y,d.JL,d.F,m.sg],styles:[""]}),n})();var C=i(2340),_=i(520);let T=(()=>{class n{constructor(t){this.http=t,this.baseUrl=C.N.baseUrl}getUsersWithRoles(){return this.http.get(`${this.baseUrl}/admin/getUsersWithRoles`)}editUserRoles(t,o){return this.http.post(`${this.baseUrl}/admin/edit-role/${t}?roles=`+o,{})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(_.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function R(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",4),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"button",5),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw().onEditModal(l)}),e._uU(7," Edit Role "),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit;e.xp6(2),e.Oqu(t.userName),e.xp6(2),e.Oqu(null==t?null:t.roles)}}let y=(()=>{class n{constructor(t,o){this.adminService=t,this.modalService=o}ngOnInit(){this.getUsersWithRoles()}onEditModal(t){var o;const r={class:"modal-dialog-centered",initialState:{title:"Edit Roles",user:t,roles:this.getRolesArray(t)}};this.bsModalRef=this.modalService.show(M,r),null===(o=this.bsModalRef.content)||void 0===o||o.updateRoles.subscribe(l=>{const a={rolesName:[...l.filter(c=>!0===c.checked).map(c=>c.name)]};a&&a.rolesName.length>0&&this.adminService.editUserRoles(t.userName,a.rolesName).subscribe(c=>{t.roles=[...c],console.log(c)})})}getUsersWithRoles(){this.adminService.getUsersWithRoles().subscribe(t=>{this.users=t})}getRolesArray(t){const o=[],r=t.roles,l=[{name:"admin",value:"admin",checked:!1},{name:"member",value:"member",checked:!1},{name:"superAdmin",value:"superAdmin",checked:!1}];for(let a=0;a<l.length;a++){let c=!1;for(let p=0;p<r.length;p++)if(l[a].name===r[p]){c=!0,l[a].checked=!0,o.push(l[a]);break}c||(l[a].checked=!1,o.push(l[a]))}return o}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(T),e.Y36(f.tT))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-management"]],decls:12,vars:1,consts:[[1,"row"],[1,"main-body"],[1,"table","text-center","table-hover"],[4,"ngFor","ngForOf"],[1,"fw-bold"],[1,"btn","btn-sm","btn-primary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"table",2),e.TgZ(3,"thead"),e.TgZ(4,"th"),e._uU(5,"userName"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Active Roles"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"#"),e.qZA(),e.qZA(),e.TgZ(10,"tbody"),e.YNc(11,R,8,2,"tr",3),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(11),e.Q6J("ngForOf",o.users))},directives:[m.sg],styles:[""]}),n})(),U=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-photo-management"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"photo-management works!"),e.qZA())},styles:[""]}),n})();const x=[{path:"",component:(()=>{class n{constructor(t){var o,r,l,a;this.route=t,this.title=null!==(a=null===(l=null===(r=null===(o=this.route)||void 0===o?void 0:o.snapshot)||void 0===r?void 0:r.data)||void 0===l?void 0:l.title)&&void 0!==a?a:""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin"]],decls:10,vars:1,consts:[[1,"mt-2"],[1,"container"],[1,"row","gutters-sm"],[1,"col-md-12","mt-3"],[1,"member-tabset","card","pt-2","pb-2"],["heading","members",1,"mt-3","p-2"],["heading","photo Management",1,"mt-3","p-2"]],template:function(t,o){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"tabset",4),e.TgZ(6,"tab",5),e._UZ(7,"app-user-management"),e.qZA(),e.TgZ(8,"tab",6),e._UZ(9,"app-photo-management"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Oqu(o.title))},directives:[h.AH,h.wW,y,U],styles:[".main-body[_ngcontent-%COMP%]{padding:15px}.card[_ngcontent-%COMP%]{box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f}.card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#fff;background-clip:border-box;border:0 solid rgba(0,0,0,.125);border-radius:.25rem}.card-body[_ngcontent-%COMP%]{flex:1 1 auto;min-height:1px;padding:1rem}.gutters-sm[_ngcontent-%COMP%]{margin-right:-8px;margin-left:-8px}.gutters-sm[_ngcontent-%COMP%] > .col[_ngcontent-%COMP%], .gutters-sm[_ngcontent-%COMP%] > [class*=col-][_ngcontent-%COMP%]{padding-right:8px;padding-left:8px}.mb-3[_ngcontent-%COMP%], .my-3[_ngcontent-%COMP%]{margin-bottom:1rem!important}.bg-gray-300[_ngcontent-%COMP%]{background-color:#e2e8f0}.h-100[_ngcontent-%COMP%]{height:100%!important}.shadow-none[_ngcontent-%COMP%]{box-shadow:none!important}"]}),n})(),pathMatch:"full",data:{title:"Admin panel"}}];let k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.Bz.forChild(x)],u.Bz]}),n})(),O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,k,Z.m,d.u5,d.UX]]}),n})()}}]);