"use strict";(self.webpackChunkClient=self.webpackChunkClient||[]).push([[592],{7677:(f,d,a)=>{a.d(d,{MQ:()=>e,Y0:()=>m,d$:()=>h,Ri:()=>c});class e{constructor(){this.pageNumber=1,this.pageSize=8,this.minAge=18,this.maxAge=150,this.gender=m.female,this.orderBy=h.age,this.typeSort=c.desc}}var m=(()=>{return(n=m||(m={}))[n.female=0]="female",n[n.male=1]="male",m;var n})(),h=(()=>{return(n=h||(h={}))[n.lastActive=0]="lastActive",n[n.created=1]="created",n[n.age=2]="age",h;var n})(),c=(()=>{return(n=c||(c={}))[n.asc=0]="asc",n[n.desc=1]="desc",c;var n})()},695:(f,d,a)=>{a.d(d,{n:()=>p});class e{}var m=a(7677),h=a(2340),c=a(520),n=a(9646),g=a(4004),l=a(4893);let p=(()=>{class o{constructor(t){this.http=t,this.baseUrl=h.N.baseUrl,this.members=[],this.userParams=new m.MQ,this.cacheMember=new Map,this.paginationResult=new e}getMembers(t){const s=Object.values(t).join("-");var i=this.cacheMember.get(s);if(i&&null!=i)return(0,n.of)(i);let r=this.setParams(t);return this.http.get(`${this.baseUrl}/users/getAllUsers`,{params:r}).pipe((0,g.U)(u=>(this.members=u.items,this.paginationResult=u,this.cacheMember.set(s,u),u)))}getMemberByUsername(t){let s=[...this.cacheMember].reduce((r,[u,v])=>r.concat(v.items),[]).find(r=>r.userName===t);if(s)return(0,n.of)(s);const i=this.members.find(r=>r.userName===t);return void 0!==i?(0,n.of)(i):this.http.get(`${this.baseUrl}/users/getUserByUserName/${t}`)}getMemberById(t){const s=this.members.find(i=>i.id===t);return void 0!==s?(0,n.of)(s):this.http.get(`${this.baseUrl}/users/getUserById/${t}`)}updateMember(t){return this.http.put(`${this.baseUrl}/users/UpdateUser`,t).pipe((0,g.U)(s=>{const i=this.members.findIndex(r=>r.id===s.id);return this.members[i]=s,s}))}setMainPhoto(t){return this.http.put(`${this.baseUrl}/users/setMainPhoto/${t}`,{})}deletePhoto(t){return this.http.delete(`${this.baseUrl}/users/deletePhoto/${t}`)}addLike(t){const s=(new c.LE).append("targetUserName",t);return this.http.post(`${this.baseUrl}/UserLikes/Add-Like`,{},{params:s})}getUserLikes(t){let s=new c.LE;return s=s.append("PageNumber",t.pageNumber),s=s.append("PageSize",t.pageSize),s=s.append("PredicateUserLike",t.PredicateUserLike.toString()),this.http.get(`${this.baseUrl}/UserLikes/get-likes`,{params:s})}setUserParams(t){this.userParams=t}getUserParams(){return this.userParams}resetUserParams(){return this.userParams=new m.MQ,this.userParams}setParams(t){let s=new c.LE;return null!==t.pageNumber&&null!==t.pageSize&&(s=s.append("pageNumber",t.pageNumber.toString()),s=s.append("pageSize",t.pageSize.toString()),s=s.append("minAge",t.minAge.toString()),s=s.append("maxAge",t.maxAge.toString()),s=s.append("gender",t.gender.toString()),s=s.append("orderBy",t.orderBy.toString()),s=s.append("typeSort",t.typeSort.toString())),s}}return o.\u0275fac=function(t){return new(t||o)(l.LFG(c.eN))},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},5146:(f,d,a)=>{a.d(d,{e:()=>p});var e=a(5861),m=a(9296),h=a(2340);class c{constructor(){this.container="Inbox",this.pageNumber=1,this.pageSize=10}}var n=a(520),g=a(1135),l=a(4893);let p=(()=>{class o{constructor(t){this.http=t,this.baseUrl=h.N.baseUrl,this.messageParams=new c,this.hubUrl=h.N.hubUrl,this.messageThreadSource=new g.X([]),this.messageThreadSource$=this.messageThreadSource.asObservable()}createHubConnection(t,s){this.hubConnection=(new m.s).withUrl(this.hubUrl+"/message?user="+s,{accessTokenFactory:()=>null==t?void 0:t.token}).withAutomaticReconnect().build(),this.hubConnection.start().catch(i=>{console.log(i)}),this.hubConnection.on("ReceiveMessageThread",i=>{this.messageThreadSource.next(i)}),this.hubConnection.on("NewMessage",i=>{this.messageThreadSource.next([...this.messageThreadSource.getValue(),i])})}stopHubConnection(){this.hubConnection&&this.hubConnection.stop().catch(t=>{console.log(t)})}addMessage(t,s){var i=this;return(0,e.Z)(function*(){try{return yield i.hubConnection.invoke("SendMessage",{recipientUserName:s,content:t})}catch(r){console.log(r)}})()}getMessages(t){let s=this.setParams(t);return this.http.get(`${this.baseUrl}/message`,{params:s})}getMessageThread(t){return this.http.get(`${this.baseUrl}/Message/Thread/${t}`)}sendMessage(t,s){return this.http.post(`${this.baseUrl}/message`,{content:s,recipientUserName:t})}setParams(t){let s=new n.LE;return null!==t.pageNumber&&null!==t.pageSize&&(s=s.append("pageNumber",t.pageNumber.toString()),s=s.append("pageSize",t.pageSize.toString()),s=s.append("container",t.container.toString())),s}getMessageParams(){return this.messageParams}setMessageParams(t){this.messageParams=t}resetMessageParams(){return this.messageParams=new c,this.messageParams}}return o.\u0275fac=function(t){return new(t||o)(l.LFG(n.eN))},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},8275:(f,d,a)=>{a.d(d,{z:()=>t});var e=a(4893),m=a(695),h=a(2290),c=a(3238),n=a(9808),g=a(167),l=a(5345);const p=function(s){return["/members",s]},o=function(){return{tab:"2"}};function b(s,i){if(1&s){const r=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e._UZ(2,"img",3),e.TgZ(3,"div",4),e.TgZ(4,"span",5),e.ALo(5,"async"),e._UZ(6,"i",6),e.qZA(),e.TgZ(7,"p",7),e._uU(8),e.qZA(),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"button",10),e._UZ(12,"i",11),e.qZA(),e.TgZ(13,"button",12),e._UZ(14,"i",13),e.qZA(),e.TgZ(15,"button",14),e.NdJ("click",function(){return e.CHM(r),e.oxw().AddLike()}),e._UZ(16,"i",15),e.qZA(),e.qZA(),e.TgZ(17,"small",16),e._uU(18),e.ALo(19,"timeago"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&s){const r=e.oxw();e.xp6(2),e.Q6J("src",r.member.photoUrl||"/assets/images/user.png",e.LSH),e.xp6(2),e.ekj("is-online",e.lcZ(5,9,r.presence.usersOnline$).includes(r.member.userName)),e.xp6(4),e.AsE("",r.member.userName," - ",r.member.age,""),e.xp6(3),e.Q6J("routerLink",e.VKq(13,p,r.member.userName)),e.xp6(2),e.Q6J("routerLink",e.VKq(15,p,r.member.userName))("queryParams",e.DdM(17,o)),e.xp6(5),e.Oqu(e.lcZ(19,11,r.member.lastActive))}}let t=(()=>{class s{constructor(r,u,v){this.memberService=r,this.toast=u,this.presence=v}ngOnInit(){}AddLike(){this.memberService.addLike(this.member.userName).subscribe(()=>{this.toast.success("user Like "+this.member.userName)})}}return s.\u0275fac=function(r){return new(r||s)(e.Y36(m.n),e.Y36(h._W),e.Y36(c.Q))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-member-card-shared"]],inputs:{member:"member"},decls:1,vars:1,consts:[["class","col shadow",4,"ngIf"],[1,"col","shadow"],[1,"card","shadow-sm"],["alt","picture",1,"img-thumbnail",3,"src"],[1,"card-body"],[1,"d-inline"],[1,"fas","fa-user"],[1,"card-text"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"routerLink"],[1,"far","fa-eye"],["routerLinkActive","router-link-active","type","button",1,"btn","btn-sm","btn-outline-secondary",3,"routerLink","queryParams"],[1,"far","fa-comment-dots"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"far","fa-heart","text-danger"],[1,"text-muted","fw-bold"]],template:function(r,u){1&r&&e.YNc(0,b,20,18,"div",0),2&r&&e.Q6J("ngIf",u.member)},directives:[n.O5,g.rH,g.Od],pipes:[n.Ov,l.wr],styles:["@keyframes fa-blink{0%{opacity:1}50%{opacity:.5}to{opacity:.1}}.is-online[_ngcontent-%COMP%]{animation:fa-blink 1.5s linear infinite reverse;color:#01bd2ae6}"]}),s})()}}]);